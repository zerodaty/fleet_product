<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- 1. Vista de Lista para las Pólizas de Seguro -->
    <record id="view_fleet_vehicle_insurance_list" model="ir.ui.view">
        <field name="name">fleet.vehicle.insurance.list</field>
        <field name="model">fleet.vehicle.insurance</field>
        <field name="arch" type="xml">
            <list string="Pólizas de Seguro">
                <field name="name"/>
                <field name="vehicle_id"/>
                <field name="insurer_id"/>
                <field name="policy_type"/>
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <!-- 2. Vista de Formulario para las Pólizas de Seguro -->
    <record id="fleet_vehicle_insurance_view_form" model="ir.ui.view">
        <field name="name">fleet.vehicle.insurance.form</field>
        <field name="model">fleet.vehicle.insurance</field>
        <field name="arch" type="xml">
            <form string="Póliza de Seguro">
                <sheet>
                    <widget name="web_ribbon" title="Archivada" bg_color="text-bg-danger" invisible="active"/>
                    <field name="active" invisible="1"/>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="Ej: POL-2025-001"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="policy_type"/>
                            <field name="vehicle_id"/>
                            <field name="insurer_id"/>
                        </group>
                        <group>
                            <field name="start_date"/>
                            <field name="end_date"/>
                            <field name="cost"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- 3. Acción de Ventana (Window Action) -->
    <record id="fleet_vehicle_insurance_action" model="ir.actions.act_window">
        <field name="name">Pólizas de Seguro</field>
        <field name="res_model">fleet.vehicle.insurance</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crea una nueva póliza de seguro para un vehículo.
            </p><p>
                Gestiona las pólizas de la empresa que cubren los vehículos de la flota.
            </p>
        </field>
    </record>

    <!-- 4. Elemento del Menú (Menu Item) -->

    <record id="fleet_vehicle_insurance_menu" model="ir.ui.menu">
        <field name="name">Pólizas de Seguro</field>
        <!-- `fleet.fleet_menu_configuration` es el ID del menú 'Configuración' de Flota -->
        <field name="parent_id" ref="fleet.fleet_configuration"/>
        <field name="action" ref="fleet_product.fleet_vehicle_insurance_action"/>
        <field name="sequence">99</field> <!-- Para ponerlo al final -->
    </record>

</odoo>